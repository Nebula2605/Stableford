<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stableford Calculator</title>

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    padding: 15px;
  }
  h2, h3 { text-align: center; }
  table {
    border-collapse: collapse;
    width: 100%;
    margin-top: 10px;
    font-size: 14px;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 6px;
    text-align: center;
  }
  input {
    width: 55px;
    font-size: 16px;
    text-align: center;
  }
  .total {
    font-size: 22px;
    font-weight: bold;
  }
</style>
</head>

<body>

<h2>Stableford Score Calculator</h2>

<p style="text-align:center;">
  Handicap:
  <input type="number" id="handicap" value="18">
</p>

<table>
  <thead>
    <tr>
      <th>Hole</th>
      <th>Par</th>
      <th>SI</th>
      <th>Strokes</th>
      <th>Pts</th>
    </tr>
  </thead>
  <tbody id="holes"></tbody>
</table>

<h3 class="total">Total Points: <span id="total">0</span></h3>

<script>
const holesTable = document.getElementById("holes");
const totalDisplay = document.getElementById("total");

// Stroke Index mapping (hole: SI)
const strokeIndex = {
  1: 15, 2: 11, 3: 13, 4: 5, 5: 3, 6: 17,
  7: 1, 8: 7, 9: 9, 10: 2, 11: 8, 12: 18,
  13: 6, 14: 10, 15: 12, 16: 14, 17: 16, 18: 4
};

for (let i = 1; i <= 18; i++) {
  holesTable.innerHTML += `
    <tr>
      <td>${i}</td>
      <td>3</td>
      <td>${strokeIndex[i]}</td>
      <td><input type="number" class="strokes"></td>
      <td class="points">0</td>
    </tr>`;
}

document.addEventListener("input", calculate);

function calculate() {
  const handicap = parseInt(document.getElementById("handicap").value) || 0;
  let total = 0;

  document.querySelectorAll("tbody tr").forEach(row => {
    const par = 3;
    const si = parseInt(row.children[2].textContent);
    const strokes = parseInt(row.querySelector(".strokes").value);

    if (!strokes) return;

    let shots = 0;
    if (si <= handicap) shots++;
    if (si <= handicap - 18) shots++;

    const net = strokes - shots;
    const diff = net - par;

    let points = 0;
    if (diff <= -3) points = 5;
    else if (diff === -2) points = 4;
    else if (diff === -1) points = 3;
    else if (diff === 0) points = 2;
    else if (diff === 1) points = 1;

    row.querySelector(".points").textContent = points;
    total += points;
  });

  totalDisplay.textContent = total;
}
</script>

</body>
</html>
